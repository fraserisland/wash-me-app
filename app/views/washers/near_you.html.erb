The washers near you:

<table>
  <thead>
    <tr>
      <th>Washer</th>
      <th>Cost</th>
      <th>Address</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @washers.each do |washer| %>
      <tr>
        <td><%= washer.user.first_name %> <%= washer.user.last_name %></td>
        <td>$<%= washer.cost %></td>
        <td><%= washer.full_address %></td>

        <% if @location.present? %>
          <td><%= @location[0].latitude %> <%=@location[0].longitude%></td>
        <% end %>

        <td><%= link_to 'Show', washer %></td>
        <td><%= link_to 'Edit', edit_washer_path(washer) %></td>
        <td><%= link_to 'Destroy', washer, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<style>
    /* Always set the map height explicitly to define the size of the div
     * element that contains the map. */
    #map {
      height: 100%;
    }
    /* Optional: Makes the sample page fill the window. */
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
    }
  </style>
</head>
<body>
  <div id="map"></div>
  <script>
    var map;
    function initMap() {
      map = new google.maps.Map(document.getElementById('map'), {
        zoom: 16,
        center: new google.maps.LatLng(<%= @location[0].latitude %>, <%= @location[0].longitude%>),
        mapTypeId: 'roadmap'
      });

      var features = [
       <% @washers.each do |washer| %>
        {
          position: new google.maps.LatLng(<%= washer.latitude %>,<%= washer.longitude %>),
          type: 'info'
        },
        <% end %>
      ];

      // Create markers.
      features.forEach(function(feature) {
        var marker = new google.maps.Marker({
          position: feature.position,
          map: map
        });
      });
    }
  </script>
  <script async defer
  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDmo1j47I6KO4QRYJl_Z8PiSat_VhfWHnk&callback=initMap">
  </script>

<!--
<p>Map:</p>

<style>
  #map {
    height: 100%;
  }
  html, body {
    height: 100%;
    margin: 0;
    padding: 0;
  }

</style>
<div id="map"></div>
 <script>
 function initMap(){}
   var map;
   function map(lat, long) {
     map = new google.maps.Map(document.getElementById('map'), {
       zoom: 15,
       center: new google.maps.LatLng(lat, long),
       mapTypeId: 'roadmap'
     });

     var features = [
      <% @washers.each do |washer| %>
       {
         position: new google.maps.LatLng(<%= washer.latitude %>,<%= washer.longitude %>),
         type: 'info'
       },
       <% end %>
     ];

     features.forEach(function(feature) {
       var marker = new google.maps.Marker({
         position: feature.position,
         map: map
       });
     });
   }
  //
  //  if (navigator.geolocation) {
  //    console.log("yes")
  //    navigator.geolocation.getCurrentPosition(function(position) {
  //      console.log(position)
  //      map(position.coords.latitude, position.coords.longitude)
  //    });
  // }

 </script>
 <script async defer
 src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDmo1j47I6KO4QRYJl_Z8PiSat_VhfWHnk&callback=initMap">
 </script> -->
